<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">

  <script src="https://cdn.jsdelivr.net/npm/lightweight-charts@4.1.0/dist/lightweight-charts.standalone.production.js"></script>

  <style>
    html, body {
      margin: 0;
      padding: 0;
      width: 100%;
      height: 100%;
      background: white;
    }
    #chart {
      width: 100%;
      height: 100%;
    }
  </style>
</head>
<body>

<div id="chart"></div>

<script>
  if (typeof LightweightCharts === "undefined") {
    document.body.innerHTML = "<h2>‚ùå LightweightCharts Î°úÎî© Ïã§Ìå®</h2>";
  } else {

    const data = __CANDLE_DATA__;
    const supportLines = __SUPPORT_LINES__;
    const markers = __MARKER_DATA__;
    const chart = LightweightCharts.createChart(
      document.getElementById('chart'),
      {
        layout: { background: { color: '#ffffff' } },
        grid: {
          vertLines: { visible: false },
          horzLines: { visible: false }
        },
        rightPriceScale: {
          scaleMargins: {
            top: 0.05,
            bottom: 0.3
          }
        },
        timeScale: { visible: false },
        crosshair: { mode: 0 }
      }
    );

    const candleSeries = chart.addCandlestickSeries({
      upColor: '#d32f2f',
      downColor: '#1976d2',
      wickUpColor: '#d32f2f',
      wickDownColor: '#1976d2',
      borderVisible: false
    });

    const volumeSeries = chart.addHistogramSeries({
      priceFormat: { type: 'volume' },
      priceScaleId: 'volume',
      overlay: false
    });

    // üî•üî•üî• Î∞îÎ°ú Ïó¨Í∏∞ !!!
    chart.priceScale('volume').applyOptions({
      scaleMargins: {
        top: 0.75,
        bottom: 0.02
      }
    });

    candleSeries.setData(data);
    supportLines.forEach(line => {
      candleSeries.createPriceLine({
        price: line.price,
        color: line.color,
        lineWidth: line.lineWidth,
        lineStyle: line.lineStyle,
        axisLabelVisible: true,
        title: line.title
      });
    });
    candleSeries.setMarkers(markers);
    volumeSeries.setData(
      data.map(d => ({
        time: d.time,
        value: d.volume,
        color: d.close >= d.open ? '#d32f2f' : '#1976d2'
      }))
    );
  }
</script>

</body>
</html>